{"ast":null,"code":"var _InvoiceService;import jsPDF from'jspdf';import emailjs from'@emailjs/browser';export class InvoiceService{static getInstance(){if(!InvoiceService.instance){InvoiceService.instance=new InvoiceService();}return InvoiceService.instance;}getTexts(language){return{ar:{title:'فكهاني الكويت',subtitle:'فاتورة شراء',invoice:'فاتورة رقم',date:'التاريخ',customer:'بيانات العميل',name:'الاسم',phone:'الهاتف',address:'العنوان',area:'المنطقة',items:'المنتجات',product:'المنتج',quantity:'الكمية',price:'السعر',total:'المجموع',subtotal:'المجموع الفرعي',delivery:'التوصيل',finalTotal:'المجموع النهائي',paymentMethod:'طريقة الدفع',cash:'دفع نقدي',link:'دفع إلكتروني',currency:'د.ك',thankYou:'شكراً لاختياركم فكهاني الكويت',contact:'للاستفسار: واتساب 99999999'},en:{title:'Fakahani Kuwait',subtitle:'Purchase Invoice',invoice:'Invoice No.',date:'Date',customer:'Customer Information',name:'Name',phone:'Phone',address:'Address',area:'Area',items:'Items',product:'Product',quantity:'Quantity',price:'Price',total:'Total',subtotal:'Subtotal',delivery:'Delivery',finalTotal:'Final Total',paymentMethod:'Payment Method',cash:'Cash Payment',link:'Electronic Payment',currency:'KWD',thankYou:'Thank you for choosing Fakahani Kuwait',contact:'For inquiries: WhatsApp 99999999'}};}async generatePDF(invoiceData){const texts=this.getTexts(invoiceData.language)[invoiceData.language];const isRTL=invoiceData.language==='ar';const pdf=new jsPDF({orientation:'portrait',unit:'mm',format:'a4'});// Set font for Arabic support (you'll need to add Arabic font)\npdf.setFont('helvetica');// Header\npdf.setFillColor(34,197,94);pdf.rect(0,0,210,40,'F');pdf.setTextColor(255,255,255);pdf.setFontSize(24);pdf.setFont('helvetica','bold');if(isRTL){pdf.text(texts.title,190,15,{align:'right'});pdf.setFontSize(14);pdf.text(texts.subtitle,190,25,{align:'right'});}else{pdf.text(texts.title,20,15);pdf.setFontSize(14);pdf.text(texts.subtitle,20,25);}// Invoice Info\npdf.setTextColor(0,0,0);pdf.setFontSize(12);let yPos=55;if(isRTL){pdf.text(\"\".concat(texts.invoice,\": \").concat(invoiceData.orderNumber),190,yPos,{align:'right'});pdf.text(\"\".concat(texts.date,\": \").concat(invoiceData.date),190,yPos+8,{align:'right'});}else{pdf.text(\"\".concat(texts.invoice,\": \").concat(invoiceData.orderNumber),20,yPos);pdf.text(\"\".concat(texts.date,\": \").concat(invoiceData.date),20,yPos+8);}// Customer Info\nyPos+=25;pdf.setFont('helvetica','bold');if(isRTL){pdf.text(texts.customer,190,yPos,{align:'right'});}else{pdf.text(texts.customer,20,yPos);}pdf.setFont('helvetica','normal');yPos+=8;const customerLines=[\"\".concat(texts.name,\": \").concat(invoiceData.customerInfo.name),\"\".concat(texts.phone,\": \").concat(invoiceData.customerInfo.phone),\"\".concat(texts.address,\": \").concat(invoiceData.customerInfo.address),\"\".concat(texts.area,\": \").concat(invoiceData.customerInfo.area)];customerLines.forEach(line=>{if(isRTL){pdf.text(line,190,yPos,{align:'right'});}else{pdf.text(line,20,yPos);}yPos+=6;});// Items Table\nyPos+=10;pdf.setFont('helvetica','bold');if(isRTL){pdf.text(texts.items,190,yPos,{align:'right'});}else{pdf.text(texts.items,20,yPos);}yPos+=10;// Table Header\npdf.setFillColor(248,250,252);pdf.rect(20,yPos-5,170,10,'F');pdf.setFont('helvetica','bold');if(isRTL){pdf.text(texts.total,30,yPos,{align:'center'});pdf.text(texts.price,70,yPos,{align:'center'});pdf.text(texts.quantity,110,yPos,{align:'center'});pdf.text(texts.product,170,yPos,{align:'right'});}else{pdf.text(texts.product,25,yPos);pdf.text(texts.quantity,110,yPos,{align:'center'});pdf.text(texts.price,140,yPos,{align:'center'});pdf.text(texts.total,170,yPos,{align:'center'});}yPos+=10;pdf.setFont('helvetica','normal');// Table Items\ninvoiceData.items.forEach(item=>{const itemTotal=item.product.price*item.quantity;if(isRTL){pdf.text(\"\".concat(itemTotal.toFixed(3)),30,yPos,{align:'center'});pdf.text(\"\".concat(item.product.price.toFixed(3)),70,yPos,{align:'center'});pdf.text(\"\".concat(item.quantity),110,yPos,{align:'center'});pdf.text(item.product.name.ar,170,yPos,{align:'right'});}else{pdf.text(item.product.name.en,25,yPos);pdf.text(\"\".concat(item.quantity),110,yPos,{align:'center'});pdf.text(\"\".concat(item.product.price.toFixed(3)),140,yPos,{align:'center'});pdf.text(\"\".concat(itemTotal.toFixed(3)),170,yPos,{align:'center'});}yPos+=8;});// Totals\nyPos+=10;pdf.line(20,yPos,190,yPos);yPos+=10;const totalsData=[{label:texts.subtotal,value:invoiceData.subtotal.toFixed(3)},{label:texts.delivery,value:invoiceData.deliveryPrice.toFixed(3)},{label:texts.finalTotal,value:invoiceData.total.toFixed(3)}];totalsData.forEach((item,index)=>{if(index===totalsData.length-1){pdf.setFont('helvetica','bold');pdf.setFontSize(14);}if(isRTL){pdf.text(\"\".concat(item.value,\" \").concat(texts.currency),50,yPos,{align:'right'});pdf.text(item.label,150,yPos,{align:'right'});}else{pdf.text(item.label,120,yPos);pdf.text(\"\".concat(texts.currency,\" \").concat(item.value),170,yPos,{align:'right'});}yPos+=8;});// Payment Method\nyPos+=10;pdf.setFont('helvetica','normal');pdf.setFontSize(12);const paymentText=\"\".concat(texts.paymentMethod,\": \").concat(invoiceData.paymentMethod==='cash'?texts.cash:texts.link);if(isRTL){pdf.text(paymentText,190,yPos,{align:'right'});}else{pdf.text(paymentText,20,yPos);}// Footer\nyPos=280;pdf.setFontSize(10);pdf.setTextColor(100,100,100);if(isRTL){pdf.text(texts.thankYou,105,yPos,{align:'center'});pdf.text(texts.contact,105,yPos+6,{align:'center'});}else{pdf.text(texts.thankYou,105,yPos,{align:'center'});pdf.text(texts.contact,105,yPos+6,{align:'center'});}return pdf.output('blob');}async sendInvoiceEmail(invoiceData,recipientEmail){let adminEmail=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'admin@fakahani-kuwait.com';try{const pdfBlob=await this.generatePDF(invoiceData);const pdfBase64=await this.blobToBase64(pdfBlob);// Initialize EmailJS (you'll need to set up your service)\nemailjs.init('YOUR_PUBLIC_KEY');// Replace with your EmailJS public key\n// Send to customer\nawait emailjs.send('YOUR_SERVICE_ID',// Replace with your EmailJS service ID\n'YOUR_TEMPLATE_ID',// Replace with your EmailJS template ID\n{to_email:recipientEmail,customer_name:invoiceData.customerInfo.name,order_number:invoiceData.orderNumber,total_amount:invoiceData.total.toFixed(3),attachment:pdfBase64,language:invoiceData.language});// Send to admin\nawait emailjs.send('YOUR_SERVICE_ID','YOUR_ADMIN_TEMPLATE_ID',// Different template for admin\n{to_email:adminEmail,customer_name:invoiceData.customerInfo.name,order_number:invoiceData.orderNumber,total_amount:invoiceData.total.toFixed(3),customer_phone:invoiceData.customerInfo.phone,customer_address:invoiceData.customerInfo.address,payment_method:invoiceData.paymentMethod,attachment:pdfBase64});return true;}catch(error){console.error('Error sending email:',error);return false;}}blobToBase64(blob){return new Promise((resolve,reject)=>{const reader=new FileReader();reader.onloadend=()=>{if(typeof reader.result==='string'){resolve(reader.result.split(',')[1]);// Remove data:application/pdf;base64, prefix\n}else{reject(new Error('Failed to convert blob to base64'));}};reader.onerror=reject;reader.readAsDataURL(blob);});}async downloadInvoice(invoiceData){const pdfBlob=await this.generatePDF(invoiceData);const url=URL.createObjectURL(pdfBlob);const link=document.createElement('a');link.href=url;link.download=\"invoice-\".concat(invoiceData.orderNumber,\".pdf\");document.body.appendChild(link);link.click();document.body.removeChild(link);URL.revokeObjectURL(url);}}_InvoiceService=InvoiceService;InvoiceService.instance=void 0;","map":{"version":3,"names":["jsPDF","emailjs","InvoiceService","getInstance","instance","getTexts","language","ar","title","subtitle","invoice","date","customer","name","phone","address","area","items","product","quantity","price","total","subtotal","delivery","finalTotal","paymentMethod","cash","link","currency","thankYou","contact","en","generatePDF","invoiceData","texts","isRTL","pdf","orientation","unit","format","setFont","setFillColor","rect","setTextColor","setFontSize","text","align","yPos","concat","orderNumber","customerLines","customerInfo","forEach","line","item","itemTotal","toFixed","totalsData","label","value","deliveryPrice","index","length","paymentText","output","sendInvoiceEmail","recipientEmail","adminEmail","arguments","undefined","pdfBlob","pdfBase64","blobToBase64","init","send","to_email","customer_name","order_number","total_amount","attachment","customer_phone","customer_address","payment_method","error","console","blob","Promise","resolve","reject","reader","FileReader","onloadend","result","split","Error","onerror","readAsDataURL","downloadInvoice","url","URL","createObjectURL","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","_InvoiceService"],"sources":["/Users/mac/Documents/GitHub/fruits/src/services/InvoiceService.ts"],"sourcesContent":["import jsPDF from 'jspdf';\nimport { CartItem, Language } from '../types';\nimport emailjs from '@emailjs/browser';\n\nexport interface InvoiceData {\n  orderNumber: string;\n  date: string;\n  customerInfo: {\n    name: string;\n    phone: string;\n    address: string;\n    area: string;\n  };\n  items: CartItem[];\n  subtotal: number;\n  deliveryPrice: number;\n  total: number;\n  paymentMethod: 'link' | 'cash';\n  language: Language;\n}\n\nexport class InvoiceService {\n  private static instance: InvoiceService;\n\n  public static getInstance(): InvoiceService {\n    if (!InvoiceService.instance) {\n      InvoiceService.instance = new InvoiceService();\n    }\n    return InvoiceService.instance;\n  }\n\n  private getTexts(language: Language) {\n    return {\n      ar: {\n        title: 'فكهاني الكويت',\n        subtitle: 'فاتورة شراء',\n        invoice: 'فاتورة رقم',\n        date: 'التاريخ',\n        customer: 'بيانات العميل',\n        name: 'الاسم',\n        phone: 'الهاتف',\n        address: 'العنوان',\n        area: 'المنطقة',\n        items: 'المنتجات',\n        product: 'المنتج',\n        quantity: 'الكمية',\n        price: 'السعر',\n        total: 'المجموع',\n        subtotal: 'المجموع الفرعي',\n        delivery: 'التوصيل',\n        finalTotal: 'المجموع النهائي',\n        paymentMethod: 'طريقة الدفع',\n        cash: 'دفع نقدي',\n        link: 'دفع إلكتروني',\n        currency: 'د.ك',\n        thankYou: 'شكراً لاختياركم فكهاني الكويت',\n        contact: 'للاستفسار: واتساب 99999999'\n      },\n      en: {\n        title: 'Fakahani Kuwait',\n        subtitle: 'Purchase Invoice',\n        invoice: 'Invoice No.',\n        date: 'Date',\n        customer: 'Customer Information',\n        name: 'Name',\n        phone: 'Phone',\n        address: 'Address',\n        area: 'Area',\n        items: 'Items',\n        product: 'Product',\n        quantity: 'Quantity',\n        price: 'Price',\n        total: 'Total',\n        subtotal: 'Subtotal',\n        delivery: 'Delivery',\n        finalTotal: 'Final Total',\n        paymentMethod: 'Payment Method',\n        cash: 'Cash Payment',\n        link: 'Electronic Payment',\n        currency: 'KWD',\n        thankYou: 'Thank you for choosing Fakahani Kuwait',\n        contact: 'For inquiries: WhatsApp 99999999'\n      }\n    };\n  }\n\n  public async generatePDF(invoiceData: InvoiceData): Promise<Blob> {\n    const texts = this.getTexts(invoiceData.language)[invoiceData.language];\n    const isRTL = invoiceData.language === 'ar';\n    \n    const pdf = new jsPDF({\n      orientation: 'portrait',\n      unit: 'mm',\n      format: 'a4'\n    });\n\n    // Set font for Arabic support (you'll need to add Arabic font)\n    pdf.setFont('helvetica');\n    \n    // Header\n    pdf.setFillColor(34, 197, 94);\n    pdf.rect(0, 0, 210, 40, 'F');\n    \n    pdf.setTextColor(255, 255, 255);\n    pdf.setFontSize(24);\n    pdf.setFont('helvetica', 'bold');\n    \n    if (isRTL) {\n      pdf.text(texts.title, 190, 15, { align: 'right' });\n      pdf.setFontSize(14);\n      pdf.text(texts.subtitle, 190, 25, { align: 'right' });\n    } else {\n      pdf.text(texts.title, 20, 15);\n      pdf.setFontSize(14);\n      pdf.text(texts.subtitle, 20, 25);\n    }\n\n    // Invoice Info\n    pdf.setTextColor(0, 0, 0);\n    pdf.setFontSize(12);\n    let yPos = 55;\n\n    if (isRTL) {\n      pdf.text(`${texts.invoice}: ${invoiceData.orderNumber}`, 190, yPos, { align: 'right' });\n      pdf.text(`${texts.date}: ${invoiceData.date}`, 190, yPos + 8, { align: 'right' });\n    } else {\n      pdf.text(`${texts.invoice}: ${invoiceData.orderNumber}`, 20, yPos);\n      pdf.text(`${texts.date}: ${invoiceData.date}`, 20, yPos + 8);\n    }\n\n    // Customer Info\n    yPos += 25;\n    pdf.setFont('helvetica', 'bold');\n    \n    if (isRTL) {\n      pdf.text(texts.customer, 190, yPos, { align: 'right' });\n    } else {\n      pdf.text(texts.customer, 20, yPos);\n    }\n    \n    pdf.setFont('helvetica', 'normal');\n    yPos += 8;\n\n    const customerLines = [\n      `${texts.name}: ${invoiceData.customerInfo.name}`,\n      `${texts.phone}: ${invoiceData.customerInfo.phone}`,\n      `${texts.address}: ${invoiceData.customerInfo.address}`,\n      `${texts.area}: ${invoiceData.customerInfo.area}`\n    ];\n\n    customerLines.forEach(line => {\n      if (isRTL) {\n        pdf.text(line, 190, yPos, { align: 'right' });\n      } else {\n        pdf.text(line, 20, yPos);\n      }\n      yPos += 6;\n    });\n\n    // Items Table\n    yPos += 10;\n    pdf.setFont('helvetica', 'bold');\n    \n    if (isRTL) {\n      pdf.text(texts.items, 190, yPos, { align: 'right' });\n    } else {\n      pdf.text(texts.items, 20, yPos);\n    }\n\n    yPos += 10;\n\n    // Table Header\n    pdf.setFillColor(248, 250, 252);\n    pdf.rect(20, yPos - 5, 170, 10, 'F');\n    \n    pdf.setFont('helvetica', 'bold');\n    \n    if (isRTL) {\n      pdf.text(texts.total, 30, yPos, { align: 'center' });\n      pdf.text(texts.price, 70, yPos, { align: 'center' });\n      pdf.text(texts.quantity, 110, yPos, { align: 'center' });\n      pdf.text(texts.product, 170, yPos, { align: 'right' });\n    } else {\n      pdf.text(texts.product, 25, yPos);\n      pdf.text(texts.quantity, 110, yPos, { align: 'center' });\n      pdf.text(texts.price, 140, yPos, { align: 'center' });\n      pdf.text(texts.total, 170, yPos, { align: 'center' });\n    }\n\n    yPos += 10;\n    pdf.setFont('helvetica', 'normal');\n\n    // Table Items\n    invoiceData.items.forEach(item => {\n      const itemTotal = item.product.price * item.quantity;\n      \n      if (isRTL) {\n        pdf.text(`${itemTotal.toFixed(3)}`, 30, yPos, { align: 'center' });\n        pdf.text(`${item.product.price.toFixed(3)}`, 70, yPos, { align: 'center' });\n        pdf.text(`${item.quantity}`, 110, yPos, { align: 'center' });\n        pdf.text(item.product.name.ar, 170, yPos, { align: 'right' });\n      } else {\n        pdf.text(item.product.name.en, 25, yPos);\n        pdf.text(`${item.quantity}`, 110, yPos, { align: 'center' });\n        pdf.text(`${item.product.price.toFixed(3)}`, 140, yPos, { align: 'center' });\n        pdf.text(`${itemTotal.toFixed(3)}`, 170, yPos, { align: 'center' });\n      }\n      \n      yPos += 8;\n    });\n\n    // Totals\n    yPos += 10;\n    pdf.line(20, yPos, 190, yPos);\n    yPos += 10;\n\n    const totalsData = [\n      { label: texts.subtotal, value: invoiceData.subtotal.toFixed(3) },\n      { label: texts.delivery, value: invoiceData.deliveryPrice.toFixed(3) },\n      { label: texts.finalTotal, value: invoiceData.total.toFixed(3) }\n    ];\n\n    totalsData.forEach((item, index) => {\n      if (index === totalsData.length - 1) {\n        pdf.setFont('helvetica', 'bold');\n        pdf.setFontSize(14);\n      }\n      \n      if (isRTL) {\n        pdf.text(`${item.value} ${texts.currency}`, 50, yPos, { align: 'right' });\n        pdf.text(item.label, 150, yPos, { align: 'right' });\n      } else {\n        pdf.text(item.label, 120, yPos);\n        pdf.text(`${texts.currency} ${item.value}`, 170, yPos, { align: 'right' });\n      }\n      \n      yPos += 8;\n    });\n\n    // Payment Method\n    yPos += 10;\n    pdf.setFont('helvetica', 'normal');\n    pdf.setFontSize(12);\n    \n    const paymentText = `${texts.paymentMethod}: ${invoiceData.paymentMethod === 'cash' ? texts.cash : texts.link}`;\n    \n    if (isRTL) {\n      pdf.text(paymentText, 190, yPos, { align: 'right' });\n    } else {\n      pdf.text(paymentText, 20, yPos);\n    }\n\n    // Footer\n    yPos = 280;\n    pdf.setFontSize(10);\n    pdf.setTextColor(100, 100, 100);\n    \n    if (isRTL) {\n      pdf.text(texts.thankYou, 105, yPos, { align: 'center' });\n      pdf.text(texts.contact, 105, yPos + 6, { align: 'center' });\n    } else {\n      pdf.text(texts.thankYou, 105, yPos, { align: 'center' });\n      pdf.text(texts.contact, 105, yPos + 6, { align: 'center' });\n    }\n\n    return pdf.output('blob');\n  }\n\n  public async sendInvoiceEmail(\n    invoiceData: InvoiceData,\n    recipientEmail: string,\n    adminEmail: string = 'admin@fakahani-kuwait.com'\n  ): Promise<boolean> {\n    try {\n      const pdfBlob = await this.generatePDF(invoiceData);\n      const pdfBase64 = await this.blobToBase64(pdfBlob);\n\n      // Initialize EmailJS (you'll need to set up your service)\n      emailjs.init('YOUR_PUBLIC_KEY'); // Replace with your EmailJS public key\n\n      // Send to customer\n      await emailjs.send(\n        'YOUR_SERVICE_ID', // Replace with your EmailJS service ID\n        'YOUR_TEMPLATE_ID', // Replace with your EmailJS template ID\n        {\n          to_email: recipientEmail,\n          customer_name: invoiceData.customerInfo.name,\n          order_number: invoiceData.orderNumber,\n          total_amount: invoiceData.total.toFixed(3),\n          attachment: pdfBase64,\n          language: invoiceData.language\n        }\n      );\n\n      // Send to admin\n      await emailjs.send(\n        'YOUR_SERVICE_ID',\n        'YOUR_ADMIN_TEMPLATE_ID', // Different template for admin\n        {\n          to_email: adminEmail,\n          customer_name: invoiceData.customerInfo.name,\n          order_number: invoiceData.orderNumber,\n          total_amount: invoiceData.total.toFixed(3),\n          customer_phone: invoiceData.customerInfo.phone,\n          customer_address: invoiceData.customerInfo.address,\n          payment_method: invoiceData.paymentMethod,\n          attachment: pdfBase64\n        }\n      );\n\n      return true;\n    } catch (error) {\n      console.error('Error sending email:', error);\n      return false;\n    }\n  }\n\n  private blobToBase64(blob: Blob): Promise<string> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        if (typeof reader.result === 'string') {\n          resolve(reader.result.split(',')[1]); // Remove data:application/pdf;base64, prefix\n        } else {\n          reject(new Error('Failed to convert blob to base64'));\n        }\n      };\n      reader.onerror = reject;\n      reader.readAsDataURL(blob);\n    });\n  }\n\n  public async downloadInvoice(invoiceData: InvoiceData): Promise<void> {\n    const pdfBlob = await this.generatePDF(invoiceData);\n    const url = URL.createObjectURL(pdfBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `invoice-${invoiceData.orderNumber}.pdf`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}